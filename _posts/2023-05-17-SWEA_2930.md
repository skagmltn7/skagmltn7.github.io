---
title: "[SWEA] 2930. í™(python)"
author: heesu
date: 2023-05-17 19:43:00+0900
categories: [Studying, coding test]
tags: [heap]
---
## ğŸ“Œ[ë¬¸ì œ](https://swexpertacademy.com/main/code/problem/problemDetail.do?problemLevel=3&contestProbId=AV-Tj7ya3jYDFAXr&categoryId=AV-Tj7ya3jYDFAXr&categoryType=CODE&problemTitle=&orderBy=PASS_RATE&selectCodeLang=PYTHON&select-1=3&pageSize=10&pageIndex=11)
![Alt text](https://github.com/skagmltn7/practice_coding_test/blob/main/SWEA/img/problem_2930_1.PNG?raw=true)
![Alt text](https://github.com/skagmltn7/practice_coding_test/blob/main/SWEA/img/problem_2930_2.PNG?raw=true)
<br><br>

## ğŸ’ªì•„ì´ë””ì–´<br>

1. max heapêµ¬í˜„<br>
    max heapì€ ë¶€ëª¨ ë…¸ë“œê°€ ì™¼ìª½, ì˜¤ë¥¸ìª½ ì„œë¸ŒíŠ¸ë¦¬ì˜ ë…¸ë“œë“¤ë³´ë‹¤ í° ì™„ì „ ì´ì§„ íŠ¸ë¦¬ì´ë‹¤. ì™„ì „ ì´ì§„ íŠ¸ë¦¬ëŠ” ë§ˆì§€ë§‰ íŠ¸ë¦¬ì˜ heightë¥¼ ì œì™¸í•˜ê³  ë…¸ë“œê°€ ëª¨ë‘ ì¡´ì¬í•˜ê³  ë§ˆì§€ë§‰ heightì—ëŠ” ì™¼ìª½ë¶€í„° ë…¸ë“œê°€ ì°¨ìˆìœ¼ë©° leafë…¸ë“œëŠ” ë§ˆì§€ë§‰ heightì—ë§Œ ì¡´ì¬í•œë‹¤.<br>
    - add<br>
    max heapì— ë…¸ë“œë¥¼ ì¶”ê°€í•˜ë©´ ê°€ì¥ ë§ˆì§€ë§‰ ì¸ë±ìŠ¤ì— ì¶”ê°€ëœë‹¤. ì¶”ê°€í•œ ì¸ë±ìŠ¤ì™€ ë¶€ëª¨ë…¸ë“œì™€ ë¹„êµí•´ì„œ ë¶€ëª¨ ë…¸ë“œê°€ ë” í¬ë©´ max heapìƒíƒœë¼ íŒë‹¨í•˜ê³  heapifyë¥¼ ë©ˆì¶˜ë‹¤. ë¶€ëª¨ ë…¸ë“œê°€ ë” ì‘ìœ¼ë©´ ë¶€ëª¨ ë…¸ë“œë¥¼ ì•„ë˜ë¡œ ë‚´ë¦¬ê³  í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼ ë¶€ëª¨ ë…¸ë“œ ìë¦¬ë¡œ ì˜®ê¸´ í›„ (ë¶€ëª¨ë…¸ë“œê°€ ë” í´ë–„ or root)ê¹Œì§€ heapifyë¥¼ ë°˜ë³µí•œë‹¤.<br><br>
    - delete<br>
    max heapì— ë…¸ë“œë¥¼ ì‚­ì œí•˜ë©´ rootì— ìˆëŠ” ê°’ì„ ë°˜í™˜í•˜ê³  ë§ˆì§€ë§‰ ë…¸ë“œë¥¼ rootë…¸ë“œ ìë¦¬ë¡œ ì˜®ê¸´ë‹¤. <br>
    - heapify<br>
    ë£¨íŠ¸ë…¸ë“œì—ì„œë¶€í„° ì™¼ìª½, ì˜¤ë¥¸ìª½ ìì‹ ë…¸ë“œë³´ë‹¤ ì‘ìœ¼ë©´ ì™¼ìª½, ì˜¤ë¥¸ìª½ ìì‹ë…¸ë“œ ì¤‘ ë” í° ìì‹ë…¸ë“œ ìë¦¬ë¡œ ì˜®ê¸´ë‹¤. ìì‹ë…¸ë“œë³´ë‹¤ í´ë•Œê¹Œì§€ ë°˜ë³µí•œë‹¤. ìì‹ ë…¸ë“œê°€ ì—†ì„ ìˆ˜ë„ ìˆìœ¼ë‹ˆ ìì‹ë…¸ë“œì˜ ì—¬ë¶€ë„ ì²´í¬í•´ì•¼í•œë‹¤.<br><br>

## ğŸ¥‚ì½”ë“œ
```python
class max_heap:
    def __init__(self):
        self.queue=[]

    def parent(self,index):
        return (index-1)//2
    
    def left_child(self,index):
        return index*2+1
    
    def right_child(self,index):
        return index*2+2
    
    def swap_node(self,inx,parent):
        self.queue[inx],self.queue[parent]=self.queue[parent],self.queue[inx]

    def add_node(self,node):
        self.queue.append(node)
        last = len(self.queue)-1
        while last>=0:
            parent = self.parent(last)
            if  parent>=0 and self.queue[parent]<self.queue[last]:
                self.swap_node(last,parent)
                last = parent
            else: break

    def delete_node(self):
        last = len(self.queue)-1
        if last<0: 
            return '-1 '
        self.swap_node(last,0)
        max_val = self.queue.pop()
        self.max_heapify(0)
        return '{} '.format(max_val)
    
    def max_heapify(self,inx):
        left,right = self.left_child(inx),self.right_child(inx)
        max_inx = inx
        
        if left<len(self.queue) and self.queue[left]>self.queue[max_inx]:
            max_inx=left
        if right<len(self.queue) and self.queue[right]>self.queue[max_inx]:
            max_inx=right
        
        if max_inx!=inx:
            self.swap_node(inx,max_inx)
            self.max_heapify(max_inx)

T=int(input())
answer=[]
for tc in range(1,T+1):
    tmp='#{} '.format(tc)
    n=int(input())
    heap = max_heap()
    for _ in range(n):
        cal = list(map(int,input().split()))
        if cal[0]==1:
            heap.add_node(cal[1])
        else:
            tmp+=heap.delete_node()
    answer.append(str(tmp))

for a in answer:
    print(a)
```